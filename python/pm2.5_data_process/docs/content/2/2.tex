\subsection{概述}
本节分为5部分, 分别介绍数据预处理, 以及对数据进行的五项数据处理, 并在部分章节中对数据进行了数据
可视化. 所有的代码都在src/data\_process.py中的类DataProcess中.
\begin{enumerate}
    \item 对HUMI, PRES, TEMP三列, 进行线性插值处理. 并对其中超过3倍标准差的高度异常
          数据, 修改为3倍标准差的数值.
    \item 假设PM指数最高为500, 对PM\_Dongsi, PM\_Dongsihuan, PM\_Nongzhanguan三列中
          超过500的数据, 修改为500PM指数进行异常值的处理.
    \item 修改cbwd列中值为"cv"的单元格, 其值用后项数据填充.
    \item 对DEWP和TEMP两列, 分别进行了0-1归一化和Z-Score归一化处理, 并将结果使用散点图的形式表示.
    \item 将北京的空气质量数据进行离散化, 按照空气质量分级标准, 计算出每个级别(或颜
          色值)对应的天数各有多少, 并将结果以饼图的形式进行可视化.
\end{enumerate}

\subsection{输入数据格式}
输入数据为csv表格形式存储的, 按日期排列的北京空气质量状况数据.
\begin{lstlisting}
    No,year,month,day,hour,season,PM_Dongsi,PM_Dongsihuan,PM_Nongzhanguan,PM_US Post,DEWP,HUMI,PRES,TEMP,cbwd,Iws,precipitation,Iprec
    1,2010,1,1,0,4,NA,NA,NA,NA,-21,43,1021,-11,NW,1.79,0,0
    2,2010,1,1,1,4,NA,NA,NA,NA,-21,47,1020,-12,NW,4.92,0,0
    3,2010,1,1,2,4,NA,NA,NA,NA,-21,43,1019,-11,NW,6.71,0,0
    4,2010,1,1,3,4,NA,NA,NA,NA,-21,55,1019,-14,NW,9.84,0,0
    5,2010,1,1,4,4,NA,NA,NA,NA,-20,51,1018,-12,NW,12.97,0,0
    6,2010,1,1,5,4,NA,NA,NA,NA,-19,47,1017,-10,NW,16.1,0,0
    7,2010,1,1,6,4,NA,NA,NA,NA,-19,44,1017,-9,NW,19.23,0,0
    8,2010,1,1,7,4,NA,NA,NA,NA,-19,44,1017,-9,NW,21.02,0,0
    9,2010,1,1,8,4,NA,NA,NA,NA,-19,44,1017,-9,NW,24.15,0,0
    
    ...
\end{lstlisting}

\subsection{数据预处理}
下面介绍数据集读入和预处理. 数据集读入和预处理在类DataProcessor中的函数
\_load\_data()中. 由于pandas的read\_csv()可以方便的对读入数据的日期进
行处理, 所以使用如下代码进行处理, 将数据的日期作为索引, 并让pandas自主推断日期格
式. 此外, 对数据中的NaN值进行了规定, 让Pandas可以正确读取NaN值, 而不是读成字符串.
\begin{lstlisting}
    self.raw_df = dataset
    # Read csv using pandas and store data in self.raw_dat and store data in
    # self.raw_data.
    dataset = pd.read_csv(
        in_file,
        parse_dates={"Date": ["year", "month", "day", "hour"]},
        date_parser=lambda x: datetime.strptime(x, "%Y %m %d %H"),
        infer_datetime_format=True,
        index_col="Date",
        na_values=["NaN", "?"],
    )
    self.raw_df = dataset
\end{lstlisting}

输入的数据格式如下:
\begin{lstlisting}
                        No  season  PM_Dongsi  PM_Dongsihuan  ...  cbwd    Iws  precipitation  Iprec
    Date                                                       ...                               
    2010-01-01 00:00:00   1       4        NaN            NaN  ...    NW   1.79            0.0    0.0
    2010-01-01 01:00:00   2       4        NaN            NaN  ...    NW   4.92            0.0    0.0
    2010-01-01 02:00:00   3       4        NaN            NaN  ...    NW   6.71            0.0    0.0
    2010-01-01 03:00:00   4       4        NaN            NaN  ...    NW   9.84            0.0    0.0
    2010-01-01 04:00:00   5       4        NaN            NaN  ...    NW  12.97            0.0    0.0
    2010-01-01 05:00:00   6       4        NaN            NaN  ...    NW  16.10            0.0    0.0
    2010-01-01 06:00:00   7       4        NaN            NaN  ...    NW  19.23            0.0    0.0
    2010-01-01 07:00:00   8       4        NaN            NaN  ...    NW  21.02            0.0    0.0
    2010-01-01 08:00:00   9       4        NaN            NaN  ...    NW  24.15            0.0    0.0
    2010-01-01 09:00:00  10       4        NaN            NaN  ...    NW  27.28            0.0    0.0
\end{lstlisting}

输入数据的统计信息如下:
\begin{lstlisting}
    --- Input data statistics:
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 52584 entries, 2010-01-01 00:00:00 to 2015-12-31 23:00:00
Data columns (total 14 columns):
 #   Column           Non-Null Count  Dtype
---  ------           --------------  -----
 0   No               52584 non-null  int64
 1   season           52584 non-null  int64
 2   PM_Dongsi        25052 non-null  float64
 3   PM_Dongsihuan    20508 non-null  float64
 4   PM_Nongzhanguan  24931 non-null  float64
 5   PM_US Post       50387 non-null  float64
 6   DEWP             52579 non-null  float64
 7   HUMI             52245 non-null  float64
 8   PRES             52245 non-null  float64
 9   TEMP             52579 non-null  float64
 10  cbwd             52579 non-null  object
 11  Iws              52579 non-null  float64
 12  precipitation    52100 non-null  float64
 13  Iprec            52100 non-null  float64
dtypes: float64(11), int64(2), object(1)
\end{lstlisting}

\subsection{处理线性插值和高度异常数据}
\input{content/2/subsec1.tex}
对线性插值和高度异常数据(超过3倍标准差)的数据的处理, 在类DataProcess中, 